---
/**
 * Homepage - MyBonzo AI Blog
 * Refactored to use component-based architecture and SSR data loading
 * Reduced from 490 lines to ~150 lines (-69%)
 */
import Layout from '@layouts/Layout.astro';
import PageHeader from '@components/Astro/PageHeader.astro';
import HeroSection from '@components/features/HeroSection.astro';
import FeaturesSection from '@components/features/FeaturesSection.astro';
import BlogSection from '@components/features/BlogSection.astro';

import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';
import Bing from '@assets/bing.jpg';
import coverImage from '@assets/alk-cover-2.webp';
import Card from '@components/Astro/Card.astro';

// Configuration imports
import { NAVIGATION_SECTIONS } from '@/config/navigation';
import {
  MAIN_FEATURE_CARDS,
  SPEED_FEATURE_CARDS,
  HOMEPAGE_METADATA
} from '@/config/homepage';
import { PRO_CONFIG } from '@/config/site';

// SSR data loading
import { getHomepageBlogPosts } from '@/lib/homepage-data';

// Import styles
import '@/styles/pages/index.css';

// Fetch blog posts at build time (SSR/SSG)
const blogPosts = await getHomepageBlogPosts();

// Theme options
const options = {
  'rounded-theme': true
};
---

<Layout title={HOMEPAGE_METADATA.title} description={HOMEPAGE_METADATA.description}>
  <PageHeader
    heading={HOMEPAGE_METADATA.heading}
    description={HOMEPAGE_METADATA.description}
    image={coverImage}
    imageAlt="MyBonzo AI Blog - centrum wiedzy o sztucznej inteligencji"
    backgroundPattern="M20.3 29.35l-3.1-3.2-3.55 3.55-3.55-3.55 3.55-3.55 3.55 3.55L31.35 12 27.8 8.45l-3.55 3.55 3.55 3.55L30.9 18.65l-3.35 3.6L20.75 15.55l3.55-3.55L17.2 4.95 20.7 1.3l3.55 3.6L20.75 8.45 17.2 12l-7.45-7.45L13.35.9l3.85 4.05-3.55 3.55-3.55 3.55 3.55 3.55-3.55 3.55-3.55-3.55-3.9-3.9 3.55-3.55L13.65 15.55l-3.55-3.55L3.05 19.1l3.55 3.55L13.65 15.55l-3.55 3.55 3.55 3.55 3.55-3.55L23.75 25.8l.05.05-3.5 3.5"
    animate={true}
  />

  <!-- Hero Section with Video + Navigation -->
  <HeroSection
    videoUrl={HOMEPAGE_METADATA.videoUrl}
    videoPoster={HOMEPAGE_METADATA.videoPoster}
    title="Witaj w MyBonzo AI Blog! Poznaj Twojego asystenta AI"
    sections={NAVIGATION_SECTIONS}
  />

  <!-- Main Feature Cards -->
  <FeaturesSection cards={MAIN_FEATURE_CARDS} className="mx-0 w-full flex flex-row flex-wrap-reverse justify-center gap-4 mt-14 mb-16 lg:mt-0 lg:justify-between lg:flex-nowrap lg:p-5 build-in" />

  <!-- AI dla Wszystkich Section -->
  <section class="flex flex-col items-center justify-center mt-6 mb-48 fade-in">
    <h2 class="graffiti-footer">AI DLA WSZYSTKICH</h2>
    <p class="text-xl max-w-6xl leading-relaxed text-center md:max-w-screen-lg lg:text-2xl lg:leading-relaxed">
      Sztuczna inteligencja nie musi być skomplikowana. MyBonzo AI Blog łączy
      zaawansowane technologie z prostotą użytkowania, bo przyszłość powinna być
      dostępna dla każdego, niezależnie od poziomu technicznego.
    </p>
  </section>

  <!-- Speed Feature Cards -->
  <FeaturesSection cards={SPEED_FEATURE_CARDS} className="mx-0 w-full flex flex-row flex-wrap-reverse justify-center gap-4 mt-8 mb-16 lg:justify-between lg:flex-nowrap lg:p-5 build-in" />

  <!-- Blog Posts Section (SSR) -->
  <BlogSection posts={blogPosts} />

  <!-- Stworzone dla Ciebie Section -->
  <section class="flex flex-col items-center justify-center mt-16 mb-0 fade-in">
    <h2 class:list={["bg-theme-accent text-theme-secondary p-5 text-center mb-8 lg:w-auto", options]}>
      Stworzone dla Ciebie
    </h2>
    <p class="text-2xl max-w-6xl leading-relaxed text-center md:max-w-screen-lg lg:text-2xl lg:leading-relaxed tracking-wide mt-6 mb-48">
      Niezależnie od tego czy jesteś początkujący czy ekspertem, MyBonzo AI Blog
      dostarcza narzędzia i wiedzę na odpowiednim poziomie. Rozwijaj swoje
      umiejętności AI w tempie które Ci odpowiada.
    </p>
    <a href="/blog" class="no-underline group group-hover:cursor-pointer">
      <div class:list={["text-xl tracking-wide bg-theme-primary text-theme-primary text-center shadow-sm shadow-theme-primary border-2 mb-4 group-hover:bg-theme-secondary group-hover:text-theme-accent group-hover:shadow-none transition-all duration-300 ease-in-out lg:text-2xl lg:tracking-wider", options]}>
        <div class="mt-0">
          <Icon name="ri:article-line" height="150" width="300" class="mb-5" />
          <p class="p-4 group-hover:text-theme-accent">Rozpocznij Czytanie</p>
        </div>
      </div>
    </a>
  </section>

  <!-- Chandler Bing Quote Image -->
  <section class="flex flex-col items-center justify-center mt-6">
    <div class="w-full mb-8 flex justify-center">
      <Image
        src={Bing}
        alt="a quote from Chandler Bing from Friends. Hard work never killed anybody, but why take a chance?"
        class:list={["shadow-md shadow-theme-primary", options]}
        loading="lazy"
        width={750}
        format="webp"
      />
    </div>
  </section>

  <!-- MyBonzo Pro CTA -->
  <section style="margin-top:2.5em; text-align:center; padding: 2rem 0;">
    <div class="container mx-auto px-4">
      <p class="text-lg">
        <strong>{PRO_CONFIG.ctaText}</strong>
        <a href={PRO_CONFIG.ctaUrl} style="color:#2a6de9; text-decoration:underline; font-weight: 600;">
          {PRO_CONFIG.ctaLinkText}
        </a>
      </p>
    </div>
  </section>
</Layout>
