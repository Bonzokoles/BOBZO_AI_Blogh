---
/* Component for rendering syntax-highlighted code blocks.
 *
 * Props:
 * - code: string - The code to display
 * - lang: BundledLanguage | SpecialLanguage | LanguageRegistration - Programming language
 * - wrap?: boolean - Enable word wrapping
 * - inline?: boolean - Render as inline code
 * - class?: string - Additional CSS classes
 *
 * Example usage:
 * <Code
 *   code="const greeting = 'Hello World';"
 *   lang="typescript"
 *   wrap={true}
 * />
 *
 * Notes:
 * - Powered by Shiki for syntax highlighting
 * - Uses theme from site configuration
 * - Supports inline and block formats
 * - Optional word wrapping
 * - Accessible styling defaults
 */

// not sure why shiki types show an error here, but it seems to work fine
import type {
  BundledLanguage,
  LanguageRegistration,
  SpecialLanguage,
} from "shiki";

import { SITE } from "@config";

import { Code as CodeComponent } from "astro:components";

interface Props {
  code: string;
  lang: BundledLanguage | SpecialLanguage | LanguageRegistration;
  wrap?: boolean;
  inline?: boolean;
  class?: string | undefined;
}

const {
  code,
  lang,
  wrap = false,
  inline = false,
  class: className,
} = Astro.props;
const options = { "rounded-theme": true };
---

<CodeComponent
  code={code}
  lang={lang}
  wrap={wrap}
  inline={inline}
  theme={SITE.shikiConfig.theme}
  class:list={["relative py-1 px-4 m-0", className, options]}
/>
