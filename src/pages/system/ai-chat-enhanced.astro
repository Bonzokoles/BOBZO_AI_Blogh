---
import AIChat from '@components/Astro/AIChat.Enhanced.astro';
import PageHeader from '@components/Astro/PageHeader.astro';
import Layout from '@layouts/Layout.astro';
import { CHAT_MODELS } from '@/config/ai-chat-models';
---

<Layout title="Enhanced AI Chat | MyBonzo AI Blog">
  <PageHeader
    heading="🚀 Enhanced AI Chat"
    description="Nowa wersja asystenta AI z zaawansowanymi funkcjami: persistence, streaming, export i więcej"
  />

  <div class="enhanced-chat-page">
    <!-- Main Chat Component -->
    <AIChat
      maxLength={1000}
      enablePersistence={true}
      enableHistorySidebar={true}
      enableStreaming={true}
    />

    <!-- Features Section -->
    <section class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">💾</div>
        <h3>Persistence & History</h3>
        <p>
          Wszystkie konwersacje są automatycznie zapisywane lokalnie. Przeglądaj historię,
          wyszukuj w poprzednich rozmowach i przywracaj kontekst.
        </p>
        <ul class="feature-list">
          <li>Automatyczne zapisywanie w localStorage</li>
          <li>Pełna historia konwersacji</li>
          <li>Wyszukiwanie full-text</li>
          <li>Nieograniczona liczba rozmów</li>
        </ul>
      </div>

      <div class="feature-card">
        <div class="feature-icon">📥</div>
        <h3>Multi-Format Export</h3>
        <p>
          Eksportuj konwersacje w 4 różnych formatach. Idealny do dokumentacji,
          udostępniania lub archiwizacji.
        </p>
        <ul class="feature-list">
          <li><strong>JSON</strong> - Pełne dane strukturalne</li>
          <li><strong>TXT</strong> - Prosty format tekstowy</li>
          <li><strong>Markdown</strong> - Z formatowaniem</li>
          <li><strong>HTML</strong> - Gotowy do publikacji</li>
        </ul>
      </div>

      <div class="feature-card">
        <div class="feature-icon">⚡</div>
        <h3>Real-time Streaming</h3>
        <p>
          Odpowiedzi AI streamowane w czasie rzeczywistym. Widzisz tekst
          pojawiający się słowo po słowie, jak w ChatGPT.
        </p>
        <ul class="feature-list">
          <li>Server-Sent Events (SSE)</li>
          <li>Progressive rendering</li>
          <li>Opcjonalne włączanie/wyłączanie</li>
          <li>Fallback do standardowego trybu</li>
        </ul>
      </div>

      <div class="feature-card">
        <div class="feature-icon">⭐</div>
        <h3>Smart Organization</h3>
        <p>
          Oznaczaj ważne konwersacje, wyszukuj po treści i zarządzaj
          rozmowami z eleganckim sidebar UI.
        </p>
        <ul class="feature-list">
          <li>Bookmarking ulubionych rozmów</li>
          <li>Automatyczne tytuły konwersacji</li>
          <li>Sortowanie po dacie aktualizacji</li>
          <li>Batch delete i export</li>
        </ul>
      </div>
    </section>

    <!-- Available Models -->
    <section class="models-section">
      <h2>Dostępne modele AI</h2>
      <div class="models-grid">
        {CHAT_MODELS.map(model => (
          <div class="model-card">
            <h3>{model.label}</h3>
            <p class="model-description">{model.description}</p>
            {model.usageHint && (
              <p class="model-hint">
                <strong>Najlepszy dla:</strong> {model.usageHint}
              </p>
            )}
            <code class="model-id">{model.id}</code>
          </div>
        ))}
      </div>
    </section>

    <!-- Usage Tips -->
    <section class="tips-section">
      <h2>💡 Wskazówki użytkowe</h2>
      <div class="tips-grid">
        <div class="tip-card">
          <h4>🔄 Przełączaj modele</h4>
          <p>
            Możesz zmienić model AI w trakcie konwersacji. Każdy model ma inne
            mocne strony - eksperymentuj!
          </p>
        </div>

        <div class="tip-card">
          <h4>📊 Streaming vs Standard</h4>
          <p>
            Streaming daje natychmiastowy feedback, ale standard mode może być szybszy
            dla krótkich odpowiedzi.
          </p>
        </div>

        <div class="tip-card">
          <h4>💾 Export dla dokumentacji</h4>
          <p>
            Używaj Markdown export do tworzenia dokumentacji technicznej.
            HTML export jest świetny do udostępniania.
          </p>
        </div>

        <div class="tip-card">
          <h4>🔍 Szukaj w historii</h4>
          <p>
            Wyszukiwarka znajduje tekst zarówno w tytułach jak i treści wiadomości.
            Świetne do odnajdywania starych rozmów.
          </p>
        </div>

        <div class="tip-card">
          <h4>⭐ Oznaczaj ulubione</h4>
          <p>
            Bookmarkuj ważne konwersacje aby szybko do nich wracać.
            Ulubione są wyróżnione gwiazdką.
          </p>
        </div>

        <div class="tip-card">
          <h4>🎨 Markdown formatting</h4>
          <p>
            AI odpowiada w Markdown - używaj **pogrubienia**, *kursywy*,
            `kodu` i bloków ```code``` dla lepszej czytelności.
          </p>
        </div>
      </div>
    </section>

    <!-- Technical Details -->
    <section class="technical-section">
      <h2>🔧 Szczegóły techniczne</h2>

      <div class="tech-grid">
        <div class="tech-card">
          <h3>Performance</h3>
          <ul>
            <li>📦 <strong>Bundle Size:</strong> ~33KB total</li>
            <li>⚡ <strong>Load Time:</strong> &lt;1s initial</li>
            <li>💾 <strong>Storage:</strong> localStorage only</li>
            <li>🔄 <strong>Rate Limit:</strong> 15 req/min (streaming)</li>
          </ul>
        </div>

        <div class="tech-card">
          <h3>Security & Privacy</h3>
          <ul>
            <li>🔐 <strong>Local-first:</strong> Data w localStorage</li>
            <li>🚫 <strong>No tracking:</strong> Zero analytics</li>
            <li>✅ <strong>Sanitized HTML:</strong> XSS protection</li>
            <li>🛡️ <strong>Rate limiting:</strong> Abuse prevention</li>
          </ul>
        </div>

        <div class="tech-card">
          <h3>Browser Support</h3>
          <ul>
            <li>✅ Chrome/Edge 90+</li>
            <li>✅ Firefox 88+</li>
            <li>✅ Safari 14+</li>
            <li>⚠️ IE not supported</li>
          </ul>
        </div>

        <div class="tech-card">
          <h3>APIs Used</h3>
          <ul>
            <li>🤖 Cloudflare Workers AI</li>
            <li>💾 localStorage API</li>
            <li>📡 Server-Sent Events</li>
            <li>📋 Clipboard API</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Example Conversations -->
    <section class="examples-section">
      <h2>📝 Przykładowe konwersacje</h2>

      <div class="examples-grid">
        <div class="example-card">
          <h4>Analiza techniczna</h4>
          <div class="example-messages">
            <div class="example-message user">
              Jaka jest różnica między REST a GraphQL?
            </div>
            <div class="example-message ai">
              REST i GraphQL to dwa różne podejścia do projektowania API...
              <br><strong>REST:</strong> Endpoint-centric, fixed structure
              <br><strong>GraphQL:</strong> Query-centric, flexible schema
            </div>
          </div>
          <span class="example-model">Model: Gemma 3 12B IT</span>
        </div>

        <div class="example-card">
          <h4>Problem-solving</h4>
          <div class="example-messages">
            <div class="example-message user">
              Jak zoptymalizować performance aplikacji React?
            </div>
            <div class="example-message ai">
              Oto kluczowe strategie optymalizacji:
              <br>1. React.memo() dla komponentów
              <br>2. useMemo() i useCallback()
              <br>3. Code splitting z lazy()
              <br>4. Virtualizacja długich list
            </div>
          </div>
          <span class="example-model">Model: Qwen QWQ 32B</span>
        </div>

        <div class="example-card">
          <h4>Szybkie Q&A</h4>
          <div class="example-messages">
            <div class="example-message user">
              Czym jest TypeScript?
            </div>
            <div class="example-message ai">
              TypeScript to superset JavaScript z typowaniem statycznym.
              Kompiluje się do JS, dodając type safety w rozwoju.
            </div>
          </div>
          <span class="example-model">Model: Phi-2</span>
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="cta-section">
      <h2>Gotowy do wypróbowania?</h2>
      <p>
        Zacznij rozmowę z AI powyżej i odkryj wszystkie funkcje Enhanced Chat.
        Twoje konwersacje zostaną automatycznie zapisane lokalnie.
      </p>
      <div class="cta-buttons">
        <a href="#" onclick="document.getElementById('chat-input')?.focus(); return false;" class="btn btn-primary btn-large">
          Zacznij rozmowę
        </a>
        <a href="/ENHANCED_CHAT_DOCS" class="btn btn-secondary btn-large">
          Przeczytaj dokumentację
        </a>
      </div>
    </section>
  </div>
</Layout>

<style>
  .enhanced-chat-page {
    display: flex;
    flex-direction: column;
    gap: 3rem;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  /* Features Grid */
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  }

  .feature-card {
    padding: 2rem;
    border-radius: 1.5rem;
    background: color-mix(in srgb, var(--color-background) 85%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-accent) 30%, transparent);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .feature-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px color-mix(in srgb, var(--color-accent) 20%, transparent);
  }

  .feature-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .feature-card h3 {
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--color-accent);
  }

  .feature-card p {
    margin-bottom: 1rem;
    line-height: 1.6;
    color: color-mix(in srgb, var(--color-text) 85%, var(--color-background) 15%);
  }

  .feature-list {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .feature-list li {
    padding-left: 1.5rem;
    position: relative;
    font-size: 0.95rem;
    color: color-mix(in srgb, var(--color-text) 80%, var(--color-background) 20%);
  }

  .feature-list li::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: var(--color-accent);
    font-weight: 600;
  }

  /* Models Section */
  .models-section {
    margin-top: 3rem;
  }

  .models-section h2 {
    font-size: 2rem;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .models-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  .model-card {
    padding: 1.75rem;
    border-radius: 1.25rem;
    background: color-mix(in srgb, var(--color-background) 88%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-accent) 25%, transparent);
  }

  .model-card h3 {
    font-size: 1.25rem;
    margin-bottom: 0.75rem;
    color: var(--color-accent);
  }

  .model-description {
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 0.75rem;
    color: color-mix(in srgb, var(--color-text) 80%, var(--color-background) 20%);
  }

  .model-hint {
    font-size: 0.85rem;
    margin-bottom: 1rem;
    padding: 0.75rem;
    border-radius: 0.75rem;
    background: color-mix(in srgb, var(--color-accent) 10%, transparent);
    color: color-mix(in srgb, var(--color-text) 85%, var(--color-background) 15%);
  }

  .model-id {
    display: block;
    font-family: 'Fira Code', monospace;
    font-size: 0.8rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    background: rgba(0, 0, 0, 0.3);
    color: color-mix(in srgb, var(--color-accent) 90%, #ffffff 10%);
  }

  /* Tips Section */
  .tips-section {
    margin-top: 3rem;
  }

  .tips-section h2 {
    font-size: 2rem;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .tips-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.25rem;
  }

  .tip-card {
    padding: 1.5rem;
    border-radius: 1rem;
    background: color-mix(in srgb, var(--color-background) 90%, transparent);
    border-left: 4px solid var(--color-accent);
  }

  .tip-card h4 {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    color: var(--color-accent);
  }

  .tip-card p {
    font-size: 0.9rem;
    line-height: 1.5;
    color: color-mix(in srgb, var(--color-text) 80%, var(--color-background) 20%);
  }

  /* Technical Section */
  .technical-section {
    margin-top: 3rem;
  }

  .technical-section h2 {
    font-size: 2rem;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .tech-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .tech-card {
    padding: 1.75rem;
    border-radius: 1.25rem;
    background: color-mix(in srgb, var(--color-background) 88%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-accent) 25%, transparent);
  }

  .tech-card h3 {
    font-size: 1.25rem;
    margin-bottom: 1rem;
    color: var(--color-accent);
  }

  .tech-card ul {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
  }

  .tech-card li {
    font-size: 0.9rem;
    line-height: 1.4;
    color: color-mix(in srgb, var(--color-text) 80%, var(--color-background) 20%);
  }

  /* Examples Section */
  .examples-section {
    margin-top: 3rem;
  }

  .examples-section h2 {
    font-size: 2rem;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .examples-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 1.5rem;
  }

  .example-card {
    padding: 1.5rem;
    border-radius: 1.25rem;
    background: color-mix(in srgb, var(--color-background) 88%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-accent) 25%, transparent);
  }

  .example-card h4 {
    font-size: 1.15rem;
    margin-bottom: 1rem;
    color: var(--color-accent);
  }

  .example-messages {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }

  .example-message {
    padding: 0.85rem 1rem;
    border-radius: 0.85rem;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .example-message.user {
    background: color-mix(in srgb, var(--color-accent) 18%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-accent) 40%, transparent);
    margin-left: auto;
    max-width: 85%;
  }

  .example-message.ai {
    background: color-mix(in srgb, var(--color-background) 92%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-accent) 20%, transparent);
    margin-right: auto;
    max-width: 90%;
  }

  .example-model {
    font-size: 0.8rem;
    color: color-mix(in srgb, var(--color-text) 65%, var(--color-background) 35%);
    font-style: italic;
  }

  /* CTA Section */
  .cta-section {
    margin-top: 3rem;
    padding: 3rem 2rem;
    border-radius: 2rem;
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-accent) 15%, transparent),
      color-mix(in srgb, var(--color-accent-alt) 12%, transparent)
    );
    border: 1px solid color-mix(in srgb, var(--color-accent) 40%, transparent);
    text-align: center;
  }

  .cta-section h2 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  .cta-section p {
    font-size: 1.15rem;
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
    color: color-mix(in srgb, var(--color-text) 85%, var(--color-background) 15%);
  }

  .cta-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    border-radius: 999px;
    padding: 0.85rem 2rem;
    font-weight: 600;
    font-size: 1rem;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border: 1px solid transparent;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
  }

  .btn-large {
    padding: 1rem 2.5rem;
    font-size: 1.1rem;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--color-accent), color-mix(in srgb, var(--color-accent-alt) 65%, var(--color-accent) 35%));
    color: color-mix(in srgb, #ffffff 92%, var(--color-background) 8%);
    border-color: color-mix(in srgb, var(--color-accent) 60%, transparent);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px color-mix(in srgb, var(--color-accent) 30%, transparent);
  }

  .btn-secondary {
    background: transparent;
    border: 2px solid var(--color-accent);
    color: var(--color-accent);
  }

  .btn-secondary:hover {
    background: color-mix(in srgb, var(--color-accent) 10%, transparent);
    transform: translateY(-2px);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .enhanced-chat-page {
      padding: 1rem 0.75rem;
      gap: 2rem;
    }

    .features-grid,
    .models-grid,
    .tips-grid,
    .tech-grid,
    .examples-grid {
      grid-template-columns: 1fr;
    }

    .cta-section {
      padding: 2rem 1.5rem;
    }

    .cta-section h2 {
      font-size: 1.75rem;
    }

    .cta-buttons {
      flex-direction: column;
      align-items: stretch;
    }

    .btn-large {
      width: 100%;
    }
  }
</style>
